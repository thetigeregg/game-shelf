# Non-secret local and deployment environment variables.
# Sensitive values are file-based secrets under SECRETS_HOST_DIR.

# Common
TZ=Europe/Zurich
SECRETS_HOST_DIR=./nas-secrets
FEATURE_MGC_IMPORT=false

# API service
HOST=0.0.0.0
PORT=3000
CORS_ORIGIN=http://127.0.0.1:8100,http://localhost:8100,http://127.0.0.1:8080,http://localhost:8080
REQUIRE_AUTH=false
DEBUG_HTTP_LOGS=
CLIENT_WRITE_TOKENS_FILE=/run/secrets/client_write_tokens
REQUEST_BODY_LIMIT_BYTES=10485760
IMAGE_CACHE_DIR=/data/images
IMAGE_CACHE_TTL_SECONDS=2592000
IMAGE_PROXY_TIMEOUT_MS=12000
IMAGE_PROXY_MAX_BYTES=8388608
IMAGE_PROXY_RATE_LIMIT_WINDOW_MS=60000
IMAGE_PROXY_MAX_REQUESTS_PER_WINDOW=120
IMAGE_PURGE_MAX_REQUESTS_PER_WINDOW=30
CACHE_STATS_RATE_LIMIT_WINDOW_MS=60000
CACHE_STATS_MAX_REQUESTS_PER_WINDOW=60
HLTB_SCRAPER_BASE_URL=http://hltb-scraper:8788
HLTB_CACHE_ENABLE_STALE_WHILE_REVALIDATE=true
HLTB_CACHE_FRESH_TTL_SECONDS=604800
HLTB_CACHE_STALE_TTL_SECONDS=7776000
METACRITIC_SCRAPER_BASE_URL=http://metacritic-scraper:8789
METACRITIC_CACHE_ENABLE_STALE_WHILE_REVALIDATE=true
METACRITIC_CACHE_FRESH_TTL_SECONDS=604800
METACRITIC_CACHE_STALE_TTL_SECONDS=7776000
MANUALS_DIR=/data/manuals
MANUALS_PUBLIC_BASE_URL=/manuals

# Postgres service
POSTGRES_DB=gameshelf

# HLTB scraper service
HLTB_SCRAPER_PORT=8788
HLTB_SCRAPER_TIMEOUT_MS=25000
HLTB_SCRAPER_BROWSER_IDLE_MS=30000
DEBUG_HLTB_SCRAPER_LOGS=false
METACRITIC_SCRAPER_PORT=8789
METACRITIC_SCRAPER_TIMEOUT_MS=25000
METACRITIC_SCRAPER_BROWSER_IDLE_MS=30000

# Backup service
BACKUP_HOST_DIR=./nas-data/backups
BACKUP_SCHEDULE_TIME=00:00
BACKUP_KEEP_COUNT=14
BACKUP_PGDUMP_RETRIES=3
BACKUP_PGDUMP_RETRY_DELAY_SECONDS=5
BACKUP_CPU_LIMIT=0.5
BACKUP_MEMORY_LIMIT=512M

# Optional host-path overrides
# POSTGRES_HOST_DIR=./nas-data/postgres
# IMAGE_CACHE_HOST_DIR=./nas-data/image-cache
# MANUALS_HOST_DIR=./nas-data/manuals
# NAS_DATA_ROOT=./nas-data

# Optional image overrides (used by docker-compose.portainer.yml)
# EDGE_IMAGE=ghcr.io/thetigeregg/game-shelf-edge:main
# API_IMAGE=ghcr.io/thetigeregg/game-shelf-api:main
# HLTB_SCRAPER_IMAGE=ghcr.io/thetigeregg/game-shelf-hltb-scraper:main
# METACRITIC_SCRAPER_IMAGE=ghcr.io/thetigeregg/game-shelf-metacritic-scraper:main
# BACKUP_IMAGE=ghcr.io/thetigeregg/game-shelf-backup:main
